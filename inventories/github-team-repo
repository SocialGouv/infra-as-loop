#!/usr/bin/env zx

const yaml = require("js-yaml")
const fs = require("fs-extra")

const main = async () => {
  const { TEAM_NAME } = process.env

  const json = await fs.readFile(
    `inventories/github-teams/${TEAM_NAME}/github-repos.json`
  )
  const repos = JSON.parse(json)

  const data = repos.map(({ name }) => ({
    REPOSITORY_NAME: name,
  }))

  const output = yaml.dump(data)

  process.stdout.write(output)
}

main()
